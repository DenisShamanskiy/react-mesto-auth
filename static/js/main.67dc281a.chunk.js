(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{19:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(20),o=n.n(i),s=n(8),r=(n(19),n(22)),u=n(2),l=n(3),p=n.p+"static/media/header__logo.1f1e9591.svg",j=n(0);var _=function(e){var t=e.isLoggedIn,n=e.userEmail,c=e.onSignOut,i=e.isLoading,o=Object(l.h)(),r="/sign-in"===o.pathname,_="/"===o.pathname,b=Object(a.useState)(!1),d=Object(u.a)(b,2),h=d[0],O=d[1];function m(){O(!h)}return Object(j.jsxs)("header",{className:"header ".concat(h?"":"page__container"," ").concat(h?"header_columned":""),children:[Object(j.jsxs)("div",{className:"header__logo-container ".concat(h?"header__logo-container_type_column":""),children:[Object(j.jsx)("img",{className:"header__logo",src:p,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),Object(j.jsx)("button",{onClick:m,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u0435\u043d\u044e",className:"header__button-close ".concat(h?"header__button-close_type_active":"")})]}),Object(j.jsxs)("div",{onClick:m,className:"header__button-menu ".concat(!t||h?"header__button-menu_type_inactive":""),children:[Object(j.jsx)("div",{className:"header__burger-line"}),Object(j.jsx)("div",{className:"header__burger-line"}),Object(j.jsx)("div",{className:"header__burger-line"})]}),!i&&Object(j.jsxs)("nav",{className:"header__nav-container ".concat(t&&!h?"header__nav-container_type_inactive":""," ").concat(h?"header__nav-container_type_column":""," "),children:[Object(j.jsx)("p",{className:"header__email-user",children:t?n:""}),r?Object(j.jsx)(s.c,{className:"header__nav-item",activeClassName:"header_nav-item_active",to:"/sign-up",children:t?"":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}):Object(j.jsx)(s.c,{onClick:t?function(){c(),O(!1)}:function(){},className:"header__nav-item ".concat(_?"header__nav-item_active":""),to:"/sign-in",children:t?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"})]})]})};var b=function(e){var t=e.title,n=e.name,a=e.buttonSubmitText,c=e.children,i=e.isOpen,o=e.onClose,r=e.onSubmit,u=e.isFormValid,p=e.isAuthForm,_=e.isToolTipForm,b=e.isSuccess,d=e.loadingButtonSubmitText,h=e.isLoadingData,O="/sign-up"===Object(l.h)().pathname;return Object(j.jsx)("div",{className:"popup ".concat(p?"popup_type_auth appear":""," ").concat(i?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container ".concat(p?"popup__container_auth page__container":"popup__container_form"),children:[_&&Object(j.jsx)("div",{className:"popup__tooltip-image ".concat(b?"":"popup__tooltip-image_type_fail")}),Object(j.jsx)("h2",{className:"popup__title ".concat(_||p?"popup__title_place_auth":""),children:t}),!p&&Object(j.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__button-close ".concat(_?"popup__btn-close_place_tooltip":""),onClick:o}),Object(j.jsxs)("form",{className:"popup__form",name:n,onSubmit:r,noValidate:!0,children:[c,!_&&Object(j.jsx)("button",{type:"submit",className:"popup__button-save ".concat(p?"popup__button-save_type_auth":""," ").concat(u?"":"popup__button-save_inactive"),disabled:!u,children:h?d:a}),O&&!_&&Object(j.jsxs)("div",{className:"popup__auth-container",children:[Object(j.jsx)("p",{className:"popup__auth-text",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0"}),Object(j.jsx)(s.b,{className:"popup__auth-link",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})})},d=c.a.memo((function(e){return e.isLoading&&Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("div",{className:"loader__item"})})}));var h=function(e){var t=e.isOpen,n=e.onLogin,c=e.isLoading,i=Object(a.useState)(""),o=Object(u.a)(i,2),s=o[0],r=o[1],l=Object(a.useState)(""),p=Object(u.a)(l,2),_=p[0],h=p[1],O=Object(a.useState)(""),m=Object(u.a)(O,2),f=m[0],v=m[1],g=Object(a.useState)(""),x=Object(u.a)(g,2),S=x[0],N=x[1],C=Object(a.useState)(!1),k=Object(u.a)(C,2),y=k[0],L=k[1],T=Object(a.useState)(!0),D=Object(u.a)(T,2),E=D[0],A=D[1],w=Object(a.useState)(!0),I=Object(u.a)(w,2),P=I[0],R=I[1];return Object(a.useEffect)((function(){L(!1)}),[t]),Object(a.useEffect)((function(){L(!(f||S||E||P))}),[E,P,f,S,s,_]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d,{isLoading:c}),!c&&Object(j.jsx)(b,{title:"\u0412\u0445\u043e\u0434",name:"login",buttonSubmitText:"\u0412\u043e\u0439\u0442\u0438",isOpen:t,onSubmit:function(e){e.preventDefault(),n({email:s,password:_})},isFormValid:y,isAuthForm:!0,children:Object(j.jsxs)("fieldset",{className:"popup__fieldset",children:[Object(j.jsxs)("label",{className:"popup__label",children:[Object(j.jsx)("input",{type:"email",name:"email",value:s,placeholder:"Email",className:"popup__input popup__input_type_auth ".concat(f?"popup__input_type_error":""),required:!0,minLength:"6",maxLength:"40",onChange:function(e){r(e.target.value),A(!1),v(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(f?"popup__input-error_active":""),children:f})]}),Object(j.jsxs)("label",{className:"popup__field",children:[Object(j.jsx)("input",{type:"password",name:"password",value:_,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"popup__input popup__input_type_auth ".concat(S?"popup__input_type_error":""),required:!0,minLength:"6",maxLength:"40",onChange:function(e){h(e.target.value),R(!1),N(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(S?"popup__input-error_active":""),children:S})]})]})})]})};var O=function(e){var t=e.isOpen,n=e.onRegister,c=Object(a.useState)(""),i=Object(u.a)(c,2),o=i[0],s=i[1],r=Object(a.useState)(""),l=Object(u.a)(r,2),p=l[0],_=l[1],d=Object(a.useState)(""),h=Object(u.a)(d,2),O=h[0],m=h[1],f=Object(a.useState)(""),v=Object(u.a)(f,2),g=v[0],x=v[1],S=Object(a.useState)(!1),N=Object(u.a)(S,2),C=N[0],k=N[1],y=Object(a.useState)(!0),L=Object(u.a)(y,2),T=L[0],D=L[1],E=Object(a.useState)(!0),A=Object(u.a)(E,2),w=A[0],I=A[1];return Object(a.useEffect)((function(){k(!1)}),[t]),Object(a.useEffect)((function(){k(!(O||g||T||w))}),[T,w,O,g,o,p]),Object(a.useEffect)((function(){s(""),_(""),k(!1),D(!0),I(!0)}),[]),Object(j.jsx)(b,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",name:"register",buttonSubmitText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",isOpen:t,onSubmit:function(e){e.preventDefault(),n({email:o,password:p})},isFormValid:C,isAuthForm:!0,children:Object(j.jsxs)("fieldset",{className:"popup__fieldset",children:[Object(j.jsxs)("label",{className:"popup__label",children:[Object(j.jsx)("input",{type:"email",name:"email",value:o,placeholder:"Email",className:"popup__input popup__input_type_auth ".concat(O?"popup__input_type_error":""),required:!0,minLength:"6",maxLength:"40",onChange:function(e){s(e.target.value),D(!1),m(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(O?"popup__input-error_active":""),children:O})]}),Object(j.jsxs)("label",{className:"popup__field",children:[Object(j.jsx)("input",{type:"password",name:"password",value:p,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"popup__input popup__input_type_auth ".concat(g?"popup__input_type_error":""),required:!0,minLength:"6",maxLength:"40",onChange:function(e){_(e.target.value),I(!1),x(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(g?"popup__input-error_active":""),children:g})]})]})})},m=c.a.createContext();var f=function(e){var t=e.card,n=e.onClickCard,a=e.onCardLike,i=e.onCardDelete,o=c.a.useContext(m),s=t.owner._id===o._id,r=t.likes.some((function(e){return e._id===o._id})),u="elements__button-remove ".concat(s?"elements__button-remove_visible":"elements__button-remove_hidden"),l=r?"elements__button-like elements__button-like_active":"elements__button-like";return Object(j.jsxs)("div",{className:"elements__item",children:[Object(j.jsx)("img",{className:"elements__image",src:"".concat(t.link),alt:"".concat(t.name),onClick:function(){n(t)}}),Object(j.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:u,onClick:function(){i(t)}}),Object(j.jsxs)("div",{className:"elements__description",children:[Object(j.jsx)("h2",{className:"elements__name",children:t.name}),Object(j.jsxs)("div",{className:"elements__like-container",children:[Object(j.jsx)("button",{type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",className:l,onClick:function(){a(t)}}),Object(j.jsx)("div",{className:"elements__like-counter",children:t.likes.length})]})]})]})};var v=function(e){var t=e.cards,n=e.editAvatar,a=e.editProfile,i=e.addPlace,o=e.onClickCard,s=e.onCardLike,r=e.onCardDelete,u=c.a.useContext(m);return Object(j.jsxs)("main",{children:[Object(j.jsxs)("section",{className:"profile page__container",children:[Object(j.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(u.avatar,")")},onClick:n}),Object(j.jsxs)("div",{className:"profile__info",children:[Object(j.jsxs)("div",{className:"profile__description",children:[Object(j.jsx)("h1",{className:"profile__name",children:u.name}),Object(j.jsx)("button",{type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__button-edit",onClick:a})]}),Object(j.jsx)("p",{className:"profile__about",children:u.about})]}),Object(j.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__button-add-image",onClick:i,children:" "})]}),Object(j.jsx)("section",{className:"elements",children:t.map((function(e){return Object(j.jsx)(f,{card:e,onClickCard:o,onCardLike:s,onCardDelete:r},e._id)}))})]})},g=Object(a.memo)((function(e){return e.isLoggedIn&&Object(j.jsx)("footer",{className:"footer page__container",children:Object(j.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})}));var x=function(e){var t=e.isOpen,n=e.onClose,i=e.onUpdateUser,o=e.isLoadingData,s=c.a.useContext(m),r=Object(a.useState)("Name"),l=Object(u.a)(r,2),p=l[0],_=l[1],d=Object(a.useState)("About"),h=Object(u.a)(d,2),O=h[0],f=h[1],v=Object(a.useState)(!0),g=Object(u.a)(v,2),x=g[0],S=g[1],N=Object(a.useState)(!0),C=Object(u.a)(N,2),k=C[0],y=C[1],L=Object(a.useState)(""),T=Object(u.a)(L,2),D=T[0],E=T[1],A=Object(a.useState)(""),w=Object(u.a)(A,2),I=w[0],P=w[1],R=Object(a.useState)(!1),F=Object(u.a)(R,2),U=F[0],M=F[1];return Object(a.useEffect)((function(){s.name&&s.about&&(_(s.name),f(s.about)),S(!0),y(!0)}),[s,t]),Object(a.useEffect)((function(){M(!(!x||!k))}),[x,k]),Object(j.jsx)(b,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"user",buttonSubmitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",loadingButtonSubmitText:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),i({name:p,about:O})},isLoadingData:o,isFormValid:U,children:Object(j.jsxs)("fieldset",{className:"popup__fieldset",children:[Object(j.jsxs)("label",{className:"popup__label",children:[Object(j.jsx)("input",{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",className:"popup__input ".concat(x?"":"popup__input_type_error"),required:!0,minLength:"2",maxLength:"40",value:p,onChange:function(e){_(e.target.value),S(e.target.validity.valid),E(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(x?"":"popup__input-error_active"),children:D})]}),Object(j.jsxs)("label",{className:"popup__field",children:[Object(j.jsx)("input",{type:"text",name:"about",placeholder:"\u0427\u0442\u043e-\u0442\u043e \u043e \u0441\u0435\u0431\u0435",className:"popup__input ".concat(k?"":"popup__input_type_error"),required:!0,minLength:"2",maxLength:"200",value:O,onChange:function(e){f(e.target.value),y(e.target.validity.valid),P(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(k?"":"popup__input-error_active"),children:I})]})]})})};var S=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,i=e.isLoadingData,o=Object(a.useState)(""),s=Object(u.a)(o,2),r=s[0],l=s[1],p=Object(a.useState)(!1),_=Object(u.a)(p,2),d=_[0],h=_[1],O=Object(a.useState)(""),m=Object(u.a)(O,2),f=m[0],v=m[1];return Object(a.useEffect)((function(){h(!1),l("")}),[t]),Object(a.useEffect)((function(){h(!f)}),[f,r]),Object(j.jsx)(b,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",buttonSubmitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",loadingButtonSubmitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({avatar:r})},isLoadingData:i,isFormValid:d,children:Object(j.jsx)("fieldset",{className:"popup__fieldset",children:Object(j.jsxs)("label",{className:"popup__label",children:[Object(j.jsx)("input",{type:"url",name:"link","aria-label":"C\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",placeholder:"C\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",className:"popup__input ".concat(f?"popup__input_type_error":""),required:!0,value:r,onChange:function(e){l(e.target.value),v(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(f?"popup__input-error_active":""),children:f})]})})})};var N=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,i=e.isLoadingData,o=Object(a.useState)(""),s=Object(u.a)(o,2),r=s[0],l=s[1],p=Object(a.useState)(""),_=Object(u.a)(p,2),d=_[0],h=_[1],O=Object(a.useState)(""),m=Object(u.a)(O,2),f=m[0],v=m[1],g=Object(a.useState)(""),x=Object(u.a)(g,2),S=x[0],N=x[1],C=Object(a.useState)(!1),k=Object(u.a)(C,2),y=k[0],L=k[1],T=Object(a.useState)(!0),D=Object(u.a)(T,2),E=D[0],A=D[1],w=Object(a.useState)(!0),I=Object(u.a)(w,2),P=I[0],R=I[1];return Object(a.useEffect)((function(){l(""),h(""),L(!1),A(!0),R(!0)}),[t]),Object(a.useEffect)((function(){L(!(f||S||E||P))}),[E,P,f,S,r,d]),Object(j.jsx)(b,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"place",buttonSubmitText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",loadingButtonSubmitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:r,link:d})},isLoadingData:i,isFormValid:y,children:Object(j.jsxs)("fieldset",{className:"popup__fieldset",children:[Object(j.jsxs)("label",{className:"popup__label",children:[Object(j.jsx)("input",{type:"text",name:"place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input ".concat(f?"popup__input_type_error":""),required:!0,minLength:"2",maxLength:"30",value:r,onChange:function(e){l(e.target.value),A(!1),v(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(f?"popup__input-error_active":""),children:f})]}),Object(j.jsxs)("label",{className:"popup__field",children:[Object(j.jsx)("input",{type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input ".concat(S?"popup__input_type_error":""),required:!0,value:d,onChange:function(e){h(e.target.value),R(!1),N(e.target.validationMessage)}}),Object(j.jsx)("span",{className:"popup__input-error ".concat(S?"popup__input-error_active":""),children:S})]})]})})};var C=function(e){var t=e.isOpen,n=e.onClose,a=e.card,c=e.onSubmitDelete,i=e.isLoadingData;return Object(j.jsx)(b,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"remove",buttonSubmitText:"\u0414\u0430",loadingButtonSubmitText:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c(a)},isLoadingData:i,isFormValid:"true"})};var k=function(e){var t=e.card,n=e.onClose;return Object(j.jsx)("div",{className:"popup popup_type_image ".concat(t.link?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__button-close",onClick:n}),Object(j.jsxs)("figure",{className:"popup__figure",children:[Object(j.jsx)("img",{className:"popup__photo",src:"".concat(t.link),alt:"".concat(t.name)}),Object(j.jsx)("div",{className:"popup__caption",children:t.name})]})]})})};var y=function(e){var t=e.isOpen,n=e.isSuccess,a=e.onClose,c=e.isToolTipForm;return Object(j.jsx)(b,{title:n?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.",name:"infoToolTip",isOpen:t,onClose:a,isToolTipForm:c,isSuccess:n})},L=n(23),T=n(24);var D=function(e){var t=e.component,n=Object(T.a)(e,["component"]);return Object(j.jsx)(l.b,{children:function(){return n.isLoggedIn?Object(j.jsx)(t,Object(L.a)({},n)):Object(j.jsx)(l.a,{to:"/sign-in"})}})},E=n(13),A=n(14),w={urlServerAuth:"https://auth.nomoreparties.co",urlServer:"https://mesto.nomoreparties.co/v1",idCohort:"cohort-22",token:"9c2455fb-83bc-4950-8d50-36e17c0acd69"},I=new(function(){function e(t){var n=t.idCohort,a=t.token,c=t.urlServer;Object(E.a)(this,e),this._idCohort=n,this._token=a,this._urlServer=c}return Object(A.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}},{key:"getInitialData",value:function(){return Promise.all([this.getUserInfo(),this.getCards()])}},{key:"getUserInfo",value:function(){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/users/me"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/cards"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"postCard",value:function(e){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"changeLike",value:function(e,t){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/cards/likes/").concat(e._id),{method:t?"PUT":"DELETE",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getCountsOfLikes",value:function(e){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/cards/likes/").concat(e._id),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._urlServer,"/").concat(this._idCohort,"/cards/").concat(e._id),{method:"DELETE",headers:{authorization:this._token}}).then(this._checkResponse)}}]),e}())(w),P=new(function(){function e(t){var n=t.urlServerAuth;Object(E.a)(this,e),this._urlServerAuth=n}return Object(A.a)(e,[{key:"_handleOriginalResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}},{key:"checkToken",value:function(e){return fetch("".concat(this._urlServerAuth,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(this._handleOriginalResponse)}},{key:"register",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this._urlServerAuth,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:t})}).then(this._handleOriginalResponse)}},{key:"login",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this._urlServerAuth,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:t})}).then(this._handleOriginalResponse)}}]),e}())(w);var R=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),o=Object(u.a)(i,2),s=o[0],p=o[1],b=Object(a.useState)(!1),d=Object(u.a)(b,2),f=d[0],L=d[1],T=Object(a.useState)(!1),E=Object(u.a)(T,2),A=E[0],w=E[1],R=Object(a.useState)(!1),F=Object(u.a)(R,2),U=F[0],M=F[1],q=Object(a.useState)(null),z=Object(u.a)(q,2),V=z[0],B=z[1],J=Object(a.useState)({}),H=Object(u.a)(J,2),G=H[0],K=H[1],Q=Object(a.useState)({}),W=Object(u.a)(Q,2),X=W[0],Y=W[1],Z=Object(a.useState)(""),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(""),ae=Object(u.a)(ne,2),ce=ae[0],ie=ae[1],oe=Object(a.useState)([]),se=Object(u.a)(oe,2),re=se[0],ue=se[1],le=Object(a.useState)({}),pe=Object(u.a)(le,2),je=pe[0],_e=pe[1],be=Object(a.useState)(null),de=Object(u.a)(be,2),he=de[0],Oe=de[1],me=Object(a.useState)(!1),fe=Object(u.a)(me,2),ve=fe[0],ge=fe[1],xe=Object(a.useState)(!1),Se=Object(u.a)(xe,2),Ne=Se[0],Ce=Se[1],ke=Object(a.useState)(!1),ye=Object(u.a)(ke,2),Le=ye[0],Te=ye[1],De=Object(a.useState)(!1),Ee=Object(u.a)(De,2),Ae=Ee[0],we=Ee[1],Ie=Object(a.useState)(!1),Pe=Object(u.a)(Ie,2),Re=Pe[0],Fe=Pe[1],Ue=Object(l.g)();function Me(){c(!1),p(!1),L(!1),w(!1),M(!1),K({}),_e({})}function qe(){ge(!0);var e=localStorage.getItem("jwt");e?P.checkToken(e).then((function(e){te(e.data.email),Oe(!0),ge(!1),Ue.push("/")})).catch((function(){B(!1),M(!0)})):ge(!1)}function ze(e){P.login(e).then((function(e){localStorage.setItem("jwt",e.token),qe()})).catch((function(){B(!1),M(!0)}))}return Object(a.useEffect)((function(){qe(),B(!1)}),[]),Object(a.useEffect)((function(){I.getInitialData().then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];Y(n),ue(a)})).catch((function(e){console.log(e)}))}),[]),Object(j.jsx)("div",{className:"page",children:Object(j.jsxs)(m.Provider,{value:X,children:[Object(j.jsx)(_,{isLoggedIn:he,userEmail:ee,onSignOut:function(){Oe(!1),localStorage.removeItem("jwt"),Ue.push("/sign-in"),te(""),ie(""),B(null)},isLoading:ve}),Object(j.jsxs)(l.d,{children:[Object(j.jsx)(D,{exact:!0,path:"/",component:v,isLoggedIn:he,editProfile:function(){c(!0)},addPlace:function(){p(!0)},editAvatar:function(){L(!0)},onClickCard:function(e){K(e)},cards:re,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===X._id}));I.changeLike(e,!t).then((function(t){ue((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)}))},onCardDelete:function(e){_e(e),w(!0)}}),Object(j.jsx)(l.b,{path:"/sign-up",children:Object(j.jsx)(O,{isOpen:!0,onRegister:function(e){P.register(e).then((function(t){te(t.data.email),ie(e.password),B(!0),M(!0)})).catch((function(){B(!1),M(!0)}))}})}),Object(j.jsx)(l.b,{path:"/sign-in",children:Object(j.jsx)(h,{isOpen:!0,onLogin:ze,isLoading:ve})}),Object(j.jsx)(l.b,{children:Object(j.jsx)(l.a,{to:he?"/":"/sign-in"})})]}),Object(j.jsx)(g,{isLoggedIn:he}),Object(j.jsx)(x,{isOpen:n,onClose:Me,onUpdateUser:function(e){Ce(!0),I.setUserInfo(e).then((function(e){Y(e),Me()})).catch((function(e){console.log(e)})).finally((function(){Ce(!1)}))},currentUser:X,isLoadingData:Ne}),Object(j.jsx)(N,{isOpen:s,onClose:Me,onAddPlace:function(e){we(!0),I.postCard(e).then((function(e){ue([e].concat(Object(r.a)(re))),Me()})).catch((function(e){console.log(e)})).finally((function(){we(!1)}))},isLoadingData:Ae}),Object(j.jsx)(S,{isOpen:f,onClose:Me,onUpdateAvatar:function(e){var t=e.avatar;Te(!0),I.setUserAvatar(t).then((function(e){Y(e),Me()})).catch((function(e){console.log(e)})).finally((function(){Te(!1)}))},isLoadingData:Le}),Object(j.jsx)(C,{isOpen:A,onClose:Me,card:je,onSubmitDelete:function(e){Fe(!0),I.deleteCard(e).then((function(){ue(re.filter((function(t){return t._id!==e._id}))),Me()})).catch((function(e){console.log(e)})).finally((function(){Fe(!1)}))},isLoadingData:Re}),Object(j.jsx)(k,{card:G,onClose:Me}),Object(j.jsx)(y,{isOpen:U,onClose:function(){Me(),V&&ze({email:ee,password:ce})},isSuccess:V,isToolTipForm:!0})]})})};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(R,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.67dc281a.chunk.js.map